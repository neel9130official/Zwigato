{"ast":null,"code":"// const API = (path, opts={}) => {\n//   const base = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n//   const headers = opts.headers || {};\n//   const token = localStorage.getItem('token');\n//   if (token) headers['Authorization'] = 'Bearer ' + token;\n//   return fetch(base + path, {...opts, headers}).then(r=>r.json());\n// };\n// export default API;\n// const API = async (url, options = {}) => {\n//   const res = await fetch(`${process.env.REACT_APP_API_URL}/items`, options);\n//   return await res.json();\n// };\n\n// export default API;\nconst API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n/**\n * API(path, options)\n * - path starts with '/items' or '/cart' or '/users/...' (no /api prefix)\n * - options: fetch init (method, headers, body)\n */\nexport default async function API(path, options = {}) {\n  const url = `${API_BASE}${path}`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(options.headers || {})\n  };\n\n  // keep token automatically (if present)\n  if (!headers.Authorization) {\n    const token = localStorage.getItem(\"token\");\n    if (token) headers.Authorization = `Bearer ${token}`;\n  }\n  const fetchOpts = {\n    headers,\n    ...options\n  };\n  try {\n    const res = await fetch(url, fetchOpts);\n    // if server returns not-json (HTML error) throw with text\n    const text = await res.text();\n    try {\n      const json = JSON.parse(text || \"{}\");\n      if (!res.ok) throw new Error(json.message || `Server error ${res.status}`);\n      return json;\n    } catch {\n      // not json\n      if (!res.ok) throw new Error(text || `Server error ${res.status}`);\n      // if ok but not json return text\n      return text;\n    }\n  } catch (err) {\n    console.error(\"API error:\", err);\n    throw err;\n  }\n}\n_c = API;\nvar _c;\n$RefreshReg$(_c, \"API\");","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_URL","API","path","options","url","headers","Authorization","token","localStorage","getItem","fetchOpts","res","fetch","text","json","JSON","parse","ok","Error","message","status","err","console","error","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/Web Development/Projects/zwigato/frontend/src/api.js"],"sourcesContent":["// const API = (path, opts={}) => {\n//   const base = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n//   const headers = opts.headers || {};\n//   const token = localStorage.getItem('token');\n//   if (token) headers['Authorization'] = 'Bearer ' + token;\n//   return fetch(base + path, {...opts, headers}).then(r=>r.json());\n// };\n// export default API;\n// const API = async (url, options = {}) => {\n//   const res = await fetch(`${process.env.REACT_APP_API_URL}/items`, options);\n//   return await res.json();\n// };\n\n// export default API;\nconst API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n/**\n * API(path, options)\n * - path starts with '/items' or '/cart' or '/users/...' (no /api prefix)\n * - options: fetch init (method, headers, body)\n */\nexport default async function API(path, options = {}) {\n  const url = `${API_BASE}${path}`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(options.headers || {}),\n  };\n\n  // keep token automatically (if present)\n  if (!headers.Authorization) {\n    const token = localStorage.getItem(\"token\");\n    if (token) headers.Authorization = `Bearer ${token}`;\n  }\n\n  const fetchOpts = { headers, ...options };\n  try {\n    const res = await fetch(url, fetchOpts);\n    // if server returns not-json (HTML error) throw with text\n    const text = await res.text();\n    try {\n      const json = JSON.parse(text || \"{}\");\n      if (!res.ok) throw new Error(json.message || `Server error ${res.status}`);\n      return json;\n    } catch {\n      // not json\n      if (!res.ok) throw new Error(text || `Server error ${res.status}`);\n      // if ok but not json return text\n      return text;\n    }\n  } catch (err) {\n    console.error(\"API error:\", err);\n    throw err;\n  }\n}\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;;AAE7E;AACA;AACA;AACA;AACA;AACA,eAAe,eAAeC,GAAGA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACpD,MAAMC,GAAG,GAAG,GAAGP,QAAQ,GAAGK,IAAI,EAAE;EAChC,MAAMG,OAAO,GAAG;IACd,cAAc,EAAE,kBAAkB;IAClC,IAAIF,OAAO,CAACE,OAAO,IAAI,CAAC,CAAC;EAC3B,CAAC;;EAED;EACA,IAAI,CAACA,OAAO,CAACC,aAAa,EAAE;IAC1B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAEF,OAAO,CAACC,aAAa,GAAG,UAAUC,KAAK,EAAE;EACtD;EAEA,MAAMG,SAAS,GAAG;IAAEL,OAAO;IAAE,GAAGF;EAAQ,CAAC;EACzC,IAAI;IACF,MAAMQ,GAAG,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAEM,SAAS,CAAC;IACvC;IACA,MAAMG,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;IAC7B,IAAI;MACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,IAAI,IAAI,CAAC;MACrC,IAAI,CAACF,GAAG,CAACM,EAAE,EAAE,MAAM,IAAIC,KAAK,CAACJ,IAAI,CAACK,OAAO,IAAI,gBAAgBR,GAAG,CAACS,MAAM,EAAE,CAAC;MAC1E,OAAON,IAAI;IACb,CAAC,CAAC,MAAM;MACN;MACA,IAAI,CAACH,GAAG,CAACM,EAAE,EAAE,MAAM,IAAIC,KAAK,CAACL,IAAI,IAAI,gBAAgBF,GAAG,CAACS,MAAM,EAAE,CAAC;MAClE;MACA,OAAOP,IAAI;IACb;EACF,CAAC,CAAC,OAAOQ,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,YAAY,EAAEF,GAAG,CAAC;IAChC,MAAMA,GAAG;EACX;AACF;AAACG,EAAA,GAhC6BvB,GAAG;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}