{"ast":null,"code":"// // import React, { useEffect, useState } from 'react';\n// // import API from '../api';\n// // import './Profile.css';\n\n// // export default function Profile() {\n// //   const [user, setUser] = useState(null);\n// //   const [orders, setOrders] = useState([]);\n\n// //   useEffect(() => {\n// //     loadProfile();\n// //   }, []);\n\n// //   const loadProfile = async () => {\n// //     const res = await API('/auth/profile');\n// //     if (res.user) {\n// //       setUser(res.user);\n// //       setOrders(res.orders);\n// //     }\n// //   };\n// //   <div className=\"profile-photo-section\">\n// //   <h3>Profile Photo</h3>\n// //   {user.photo ? (\n// //     <img\n// //       src={`${process.env.REACT_APP_API_URL.replace('/api', '')}${user.photo}`}\n// //       alt=\"Profile\"\n// //       className=\"profile-photo\"\n// //     />\n// //   ) : (\n// //     <p>No photo uploaded.</p>\n// //   )}\n// //   <label className=\"upload-btn\">\n// //     Change Photo\n// //     <input\n// //       type=\"file\"\n// //       accept=\"image/*\"\n// //       onChange={async (e) => {\n// //         const fd = new FormData();\n// //         fd.append('photo', e.target.files[0]);\n// //         const res = await fetch(`${process.env.REACT_APP_API_URL}/auth/upload-photo`, {\n// //           method: 'POST',\n// //           headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n// //           body: fd\n// //         }).then((r) => r.json());\n// //         if (res.photo) {\n// //           setUser({ ...user, photo: res.photo });\n// //           alert('‚úÖ Profile photo updated!');\n// //         }\n// //       }}\n// //     />\n// //   </label>\n// // </div>\n\n// //   if (!user) return <p>Loading profile...</p>;\n\n// //   return (\n// //     <div className=\"profile-page\">\n// //       <h2>My Profile</h2>\n\n// //       <div className=\"profile-card\">\n// //         <h3>Personal Details</h3>\n// //         <p><b>Name:</b> {user.name}</p>\n// //         <p><b>Age:</b> {user.age}</p>\n// //         <p><b>Mobile:</b> {user.mobile}</p>\n// //         <p><b>Email:</b> {user.email}</p>\n// //         <p><b>Address:</b> {user.address}</p>\n// //         <p><b>Member Since:</b> {new Date(user.created_at).toLocaleDateString()}</p>\n// //       </div>\n\n// //       <div className=\"order-history\">\n// //         <h3>Order History</h3>\n// //         {orders.length === 0 ? (\n// //           <p>No orders yet.</p>\n// //         ) : (\n// //           orders.map((order) => (\n// //             <div key={order.id} className=\"order-card\">\n// //               <div className=\"order-header\">\n// //                 <span>Order #{order.id}</span>\n// //                 <span>{new Date(order.created_at).toLocaleString()}</span>\n// //               </div>\n// //               <div className=\"order-items\">\n// //                 {order.items.map((it, idx) => (\n// //                   <div key={idx} className=\"order-item\">\n// //                     <span>{it.name}</span>\n// //                     <span>\n// //                       ‚Çπ{it.price} √ó {it.quantity}\n// //                     </span>\n// //                   </div>\n// //                 ))}\n// //               </div>\n// //               <div className=\"order-total\">\n// //                 <b>Total: ‚Çπ{order.total}</b> <span>({order.status})</span>\n// //               </div>\n// //             </div>\n// //           ))\n// //         )}\n// //       </div>\n// //     </div>\n// //   );\n// // }\n// import React, { useEffect, useState } from \"react\";\n// import API from \"../api\";\n// import \"./Profile.css\";\n\n// export default function Profile() {\n//   const [user, setUser] = useState(null);\n//   const [orders, setOrders] = useState([]);\n//   const [loading, setLoading] = useState(true);\n\n//   useEffect(() => {\n//     loadProfile();\n//   }, []);\n\n//   // üîπ Load profile and orders\n// //   const loadProfile = async () => {\n// //     try {\n// //       const res = await API(\"/users/profile\");\n// //       if (res.user) {\n// //         setUser(res.user);\n// //         setOrders(res.orders || []);\n// //       }\n// //     } catch (err) {\n// //       console.error(\"‚ùå Failed to load profile:\", err);\n// //       alert(\"Failed to load profile. Please log in again.\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n// const loadProfile = async () => {\n//   try {\n//     const res = await fetch(`${process.env.REACT_APP_API_URL}/users/profile`, {\n//       headers: {\n//         Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n//       },\n//     });\n\n//     if (!res.ok) {\n//       throw new Error(\"Failed to fetch profile\");\n//     }\n\n//     const data = await res.json();\n//     if (data.user) {\n//       setUser(data.user);\n//       setOrders(data.orders || []);\n//     } else {\n//       alert(data.message || \"Could not load profile\");\n//     }\n//   } catch (err) {\n//     console.error(\"‚ùå Failed to load profile:\", err);\n//     alert(\"Failed to load profile. Please log in again.\");\n//   } finally {\n//     setLoading(false);\n//   }\n// };\n\n//   // üîπ Handle photo upload\n//   const handlePhotoUpload = async (e) => {\n//     const file = e.target.files[0];\n//     if (!file) return;\n\n//     try {\n//       const fd = new FormData();\n//       fd.append(\"photo\", file);\n\n//       const res = await fetch(\n//         `${process.env.REACT_APP_API_URL}/users/upload-photo`,\n//         {\n//           method: \"POST\",\n//           headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n//           body: fd,\n//         }\n//       ).then((r) => r.json());\n\n//       if (res.photo) {\n//         setUser({ ...user, photo: res.photo });\n//         alert(\"‚úÖ Profile photo updated successfully!\");\n//       } else {\n//         alert(res.message || \"Failed to update photo\");\n//       }\n//     } catch (err) {\n//       console.error(\"‚ùå Upload error:\", err);\n//       alert(\"Something went wrong while uploading photo.\");\n//     }\n//   };\n\n//   if (loading) return <p className=\"loading\">Loading profile...</p>;\n//   if (!user) return <p className=\"loading\">No profile data found.</p>;\n\n//   return (\n//     <div className=\"profile-page\">\n//       <h2 className=\"profile-title\">My Profile</h2>\n\n//       {/* üñº Profile Photo Section */}\n//       <div className=\"profile-photo-section\">\n//         <h3>Profile Photo</h3>\n//         {user?.photo ? (\n//           <img\n//             src={`${process.env.REACT_APP_API_URL.replace(\"/api\", \"\")}${\n//               user.photo\n//             }`}\n//             alt=\"Profile\"\n//             className=\"profile-photo\"\n//           />\n//         ) : (\n//           <p className=\"no-photo\">No photo uploaded.</p>\n//         )}\n\n//         <label className=\"upload-btn\">\n//           Change Photo\n//           <input\n//             type=\"file\"\n//             accept=\"image/*\"\n//             onChange={handlePhotoUpload}\n//             hidden\n//           />\n//         </label>\n//       </div>\n\n//       {/* üßç Personal Details */}\n//       <div className=\"profile-card\">\n//         <h3>Personal Details</h3>\n//         <p>\n//           <b>Name:</b> {user?.name}\n//         </p>\n//         <p>\n//           <b>Age:</b> {user?.age}\n//         </p>\n//         <p>\n//           <b>Mobile:</b> {user?.mobile}\n//         </p>\n//         <p>\n//           <b>Email:</b> {user?.email}\n//         </p>\n//         <p>\n//           <b>Address:</b> {user?.address}\n//         </p>\n//         <p>\n//           <b>Member Since:</b>{\" \"}\n//           {user?.created_at\n//             ? new Date(user.created_at).toLocaleDateString()\n//             : \"N/A\"}\n//         </p>\n//       </div>\n\n//       {/* üõç Order History */}\n//       <div className=\"order-history\">\n//         <h3>Order History</h3>\n//         {orders.length === 0 ? (\n//           <p>No orders yet.</p>\n//         ) : (\n//           orders.map((order) => (\n//             <div key={order.id} className=\"order-card\">\n//               <div className=\"order-header\">\n//                 <span>Order #{order.id}</span>\n//                 <span>\n//                   {new Date(order.created_at).toLocaleString(\"en-IN\")}\n//                 </span>\n//               </div>\n//               <div className=\"order-items\">\n//                 {order.items?.map((it, idx) => (\n//                   <div key={idx} className=\"order-item\">\n//                     <span>{it.name}</span>\n//                     <span>\n//                       ‚Çπ{it.price} √ó {it.quantity}\n//                     </span>\n//                   </div>\n//                 ))}\n//               </div>\n//               <div className=\"order-total\">\n//                 <b>Total: ‚Çπ{order.total}</b>{\" \"}\n//                 <span className={`status ${order.status?.toLowerCase()}`}>\n//                   ({order.status})\n//                 </span>\n//               </div>\n//             </div>\n//           ))\n//         )}\n//       </div>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["C:/Users/Admin/Desktop/Web Development/Projects/zwigato/frontend/src/pages/Profile.js"],"sourcesContent":["// // import React, { useEffect, useState } from 'react';\r\n// // import API from '../api';\r\n// // import './Profile.css';\r\n\r\n// // export default function Profile() {\r\n// //   const [user, setUser] = useState(null);\r\n// //   const [orders, setOrders] = useState([]);\r\n\r\n// //   useEffect(() => {\r\n// //     loadProfile();\r\n// //   }, []);\r\n\r\n// //   const loadProfile = async () => {\r\n// //     const res = await API('/auth/profile');\r\n// //     if (res.user) {\r\n// //       setUser(res.user);\r\n// //       setOrders(res.orders);\r\n// //     }\r\n// //   };\r\n// //   <div className=\"profile-photo-section\">\r\n// //   <h3>Profile Photo</h3>\r\n// //   {user.photo ? (\r\n// //     <img\r\n// //       src={`${process.env.REACT_APP_API_URL.replace('/api', '')}${user.photo}`}\r\n// //       alt=\"Profile\"\r\n// //       className=\"profile-photo\"\r\n// //     />\r\n// //   ) : (\r\n// //     <p>No photo uploaded.</p>\r\n// //   )}\r\n// //   <label className=\"upload-btn\">\r\n// //     Change Photo\r\n// //     <input\r\n// //       type=\"file\"\r\n// //       accept=\"image/*\"\r\n// //       onChange={async (e) => {\r\n// //         const fd = new FormData();\r\n// //         fd.append('photo', e.target.files[0]);\r\n// //         const res = await fetch(`${process.env.REACT_APP_API_URL}/auth/upload-photo`, {\r\n// //           method: 'POST',\r\n// //           headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n// //           body: fd\r\n// //         }).then((r) => r.json());\r\n// //         if (res.photo) {\r\n// //           setUser({ ...user, photo: res.photo });\r\n// //           alert('‚úÖ Profile photo updated!');\r\n// //         }\r\n// //       }}\r\n// //     />\r\n// //   </label>\r\n// // </div>\r\n\r\n\r\n// //   if (!user) return <p>Loading profile...</p>;\r\n\r\n// //   return (\r\n// //     <div className=\"profile-page\">\r\n// //       <h2>My Profile</h2>\r\n\r\n// //       <div className=\"profile-card\">\r\n// //         <h3>Personal Details</h3>\r\n// //         <p><b>Name:</b> {user.name}</p>\r\n// //         <p><b>Age:</b> {user.age}</p>\r\n// //         <p><b>Mobile:</b> {user.mobile}</p>\r\n// //         <p><b>Email:</b> {user.email}</p>\r\n// //         <p><b>Address:</b> {user.address}</p>\r\n// //         <p><b>Member Since:</b> {new Date(user.created_at).toLocaleDateString()}</p>\r\n// //       </div>\r\n\r\n// //       <div className=\"order-history\">\r\n// //         <h3>Order History</h3>\r\n// //         {orders.length === 0 ? (\r\n// //           <p>No orders yet.</p>\r\n// //         ) : (\r\n// //           orders.map((order) => (\r\n// //             <div key={order.id} className=\"order-card\">\r\n// //               <div className=\"order-header\">\r\n// //                 <span>Order #{order.id}</span>\r\n// //                 <span>{new Date(order.created_at).toLocaleString()}</span>\r\n// //               </div>\r\n// //               <div className=\"order-items\">\r\n// //                 {order.items.map((it, idx) => (\r\n// //                   <div key={idx} className=\"order-item\">\r\n// //                     <span>{it.name}</span>\r\n// //                     <span>\r\n// //                       ‚Çπ{it.price} √ó {it.quantity}\r\n// //                     </span>\r\n// //                   </div>\r\n// //                 ))}\r\n// //               </div>\r\n// //               <div className=\"order-total\">\r\n// //                 <b>Total: ‚Çπ{order.total}</b> <span>({order.status})</span>\r\n// //               </div>\r\n// //             </div>\r\n// //           ))\r\n// //         )}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n// import React, { useEffect, useState } from \"react\";\r\n// import API from \"../api\";\r\n// import \"./Profile.css\";\r\n\r\n// export default function Profile() {\r\n//   const [user, setUser] = useState(null);\r\n//   const [orders, setOrders] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n\r\n//   useEffect(() => {\r\n//     loadProfile();\r\n//   }, []);\r\n\r\n//   // üîπ Load profile and orders\r\n// //   const loadProfile = async () => {\r\n// //     try {\r\n// //       const res = await API(\"/users/profile\");\r\n// //       if (res.user) {\r\n// //         setUser(res.user);\r\n// //         setOrders(res.orders || []);\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"‚ùå Failed to load profile:\", err);\r\n// //       alert(\"Failed to load profile. Please log in again.\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n// const loadProfile = async () => {\r\n//   try {\r\n//     const res = await fetch(`${process.env.REACT_APP_API_URL}/users/profile`, {\r\n//       headers: {\r\n//         Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n//       },\r\n//     });\r\n\r\n//     if (!res.ok) {\r\n//       throw new Error(\"Failed to fetch profile\");\r\n//     }\r\n\r\n//     const data = await res.json();\r\n//     if (data.user) {\r\n//       setUser(data.user);\r\n//       setOrders(data.orders || []);\r\n//     } else {\r\n//       alert(data.message || \"Could not load profile\");\r\n//     }\r\n//   } catch (err) {\r\n//     console.error(\"‚ùå Failed to load profile:\", err);\r\n//     alert(\"Failed to load profile. Please log in again.\");\r\n//   } finally {\r\n//     setLoading(false);\r\n//   }\r\n// };\r\n\r\n\r\n//   // üîπ Handle photo upload\r\n//   const handlePhotoUpload = async (e) => {\r\n//     const file = e.target.files[0];\r\n//     if (!file) return;\r\n\r\n//     try {\r\n//       const fd = new FormData();\r\n//       fd.append(\"photo\", file);\r\n\r\n//       const res = await fetch(\r\n//         `${process.env.REACT_APP_API_URL}/users/upload-photo`,\r\n//         {\r\n//           method: \"POST\",\r\n//           headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\r\n//           body: fd,\r\n//         }\r\n//       ).then((r) => r.json());\r\n\r\n//       if (res.photo) {\r\n//         setUser({ ...user, photo: res.photo });\r\n//         alert(\"‚úÖ Profile photo updated successfully!\");\r\n//       } else {\r\n//         alert(res.message || \"Failed to update photo\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"‚ùå Upload error:\", err);\r\n//       alert(\"Something went wrong while uploading photo.\");\r\n//     }\r\n//   };\r\n\r\n//   if (loading) return <p className=\"loading\">Loading profile...</p>;\r\n//   if (!user) return <p className=\"loading\">No profile data found.</p>;\r\n\r\n//   return (\r\n//     <div className=\"profile-page\">\r\n//       <h2 className=\"profile-title\">My Profile</h2>\r\n\r\n//       {/* üñº Profile Photo Section */}\r\n//       <div className=\"profile-photo-section\">\r\n//         <h3>Profile Photo</h3>\r\n//         {user?.photo ? (\r\n//           <img\r\n//             src={`${process.env.REACT_APP_API_URL.replace(\"/api\", \"\")}${\r\n//               user.photo\r\n//             }`}\r\n//             alt=\"Profile\"\r\n//             className=\"profile-photo\"\r\n//           />\r\n//         ) : (\r\n//           <p className=\"no-photo\">No photo uploaded.</p>\r\n//         )}\r\n\r\n//         <label className=\"upload-btn\">\r\n//           Change Photo\r\n//           <input\r\n//             type=\"file\"\r\n//             accept=\"image/*\"\r\n//             onChange={handlePhotoUpload}\r\n//             hidden\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       {/* üßç Personal Details */}\r\n//       <div className=\"profile-card\">\r\n//         <h3>Personal Details</h3>\r\n//         <p>\r\n//           <b>Name:</b> {user?.name}\r\n//         </p>\r\n//         <p>\r\n//           <b>Age:</b> {user?.age}\r\n//         </p>\r\n//         <p>\r\n//           <b>Mobile:</b> {user?.mobile}\r\n//         </p>\r\n//         <p>\r\n//           <b>Email:</b> {user?.email}\r\n//         </p>\r\n//         <p>\r\n//           <b>Address:</b> {user?.address}\r\n//         </p>\r\n//         <p>\r\n//           <b>Member Since:</b>{\" \"}\r\n//           {user?.created_at\r\n//             ? new Date(user.created_at).toLocaleDateString()\r\n//             : \"N/A\"}\r\n//         </p>\r\n//       </div>\r\n\r\n//       {/* üõç Order History */}\r\n//       <div className=\"order-history\">\r\n//         <h3>Order History</h3>\r\n//         {orders.length === 0 ? (\r\n//           <p>No orders yet.</p>\r\n//         ) : (\r\n//           orders.map((order) => (\r\n//             <div key={order.id} className=\"order-card\">\r\n//               <div className=\"order-header\">\r\n//                 <span>Order #{order.id}</span>\r\n//                 <span>\r\n//                   {new Date(order.created_at).toLocaleString(\"en-IN\")}\r\n//                 </span>\r\n//               </div>\r\n//               <div className=\"order-items\">\r\n//                 {order.items?.map((it, idx) => (\r\n//                   <div key={idx} className=\"order-item\">\r\n//                     <span>{it.name}</span>\r\n//                     <span>\r\n//                       ‚Çπ{it.price} √ó {it.quantity}\r\n//                     </span>\r\n//                   </div>\r\n//                 ))}\r\n//               </div>\r\n//               <div className=\"order-total\">\r\n//                 <b>Total: ‚Çπ{order.total}</b>{\" \"}\r\n//                 <span className={`status ${order.status?.toLowerCase()}`}>\r\n//                   ({order.status})\r\n//                 </span>\r\n//               </div>\r\n//             </div>\r\n//           ))\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}