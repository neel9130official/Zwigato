{"ast":null,"code":"// import React, { useState, useEffect } from \"react\";\n// import \"./AuthModal.css\";\n// console.log(\"ðŸ” API Base URL =\", process.env.REACT_APP_API_URL);\n\n// function AuthModal({ onClose, onLogin }) {\n//   const [isLogin, setIsLogin] = useState(true);\n//   const [formData, setFormData] = useState({\n//     name: \"\",\n//     age: \"\",\n//     address: \"\",\n//     mobile: \"\",\n//     email: \"\",\n//     password: \"\",\n//     photo: null,\n//     photoPreview: null,\n//   });\n\n//   useEffect(() => {\n//     return () => {\n//       if (formData.photoPreview) {\n//         URL.revokeObjectURL(formData.photoPreview);\n//       }\n//     };\n//   }, [formData.photoPreview]);\n\n//   // const handleSubmit = async (e) => {\n//   //   e.preventDefault();\n\n//   //   const form = new FormData();\n//   //   Object.keys(formData).forEach((key) => {\n//   //     if (formData[key] && key !== \"photoPreview\") {\n//   //       form.append(key, formData[key]);\n//   //     }\n//   //   });\n\n//   //   const url = isLogin\n//   //     ? `${process.env.REACT_APP_API_URL}/users/login`\n//   //     : `${process.env.REACT_APP_API_URL}/users/signup`;\n\n//   //   try {\n//   //     const res = await fetch(url, {\n//   //       method: \"POST\",\n//   //       body: form,\n//   //     });\n\n//   //     const data = await res.json();\n\n//   //     if (data.token) {\n//   //       onLogin(data.token, data.user);\n//   //     } else {\n//   //       alert(data.message || \"Something went wrong!\");\n//   //     }\n//   //   } catch (err) {\n//   //     console.error(\"Fetch error:\", err);\n//   //     alert(\"Failed to connect to backend. Please check your server.\");\n//   //   }\n//   // };\n//   const handleSubmit = async (e) => {\n//   e.preventDefault();\n//   setError(\"\");\n\n//   const { email, password } = form;\n\n//   if (!email || !password) {\n//     setError(\"Email and password are required.\");\n//     return;\n//   }\n\n//   try {\n//     const endpoint = isLogin ? \"/users/login\" : \"/users/signup\";\n//     console.log(\"ðŸ“¡ Sending to:\", endpoint, { email, password });\n\n//     const res = await API(endpoint, {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify({ email, password }), // âœ… Must be stringified\n//     });\n\n//     console.log(\"âœ… Response:\", res);\n\n//     if (res.token) {\n//       localStorage.setItem(\"token\", res.token);\n//       onLogin(res.token);\n//       onClose();\n//     } else {\n//       setError(res.message || \"Invalid server response.\");\n//     }\n//   } catch (err) {\n//     console.error(\"âŒ Login failed:\", err);\n//     setError(err.message || \"Something went wrong.\");\n//   }\n// };\n\n//   const handleFileChange = (e) => {\n//     const file = e.target.files[0];\n//     if (file) {\n//       const previewUrl = URL.createObjectURL(file);\n//       setFormData({ ...formData, photo: file, photoPreview: previewUrl });\n//     }\n//   };\n\n//   return (\n//     <div className=\"auth-overlay\">\n//       <div className=\"auth-modal animate-popup\">\n//         <div className=\"auth-header\">\n//           <h2>{isLogin ? \"Welcome Back!\" : \"Create an Account\"}</h2>\n//           <button className=\"close-btn\" onClick={onClose}>\n//             âœ–\n//           </button>\n//         </div>\n\n//         <form className=\"auth-form\" onSubmit={handleSubmit}>\n//           {!isLogin && (\n//             <div className=\"photo-upload\">\n//               <label htmlFor=\"photo\">\n//                 <div className=\"photo-frame\">\n//                   {formData.photoPreview ? (\n//                     <img\n//                       src={formData.photoPreview}\n//                       alt=\"Preview\"\n//                       className=\"photo-preview\"\n//                     />\n//                   ) : (\n//                     <>\n//                       <span role=\"img\" aria-label=\"camera\" style={{ fontSize: \"24px\" }}>\n//                         ðŸ“·\n//                       </span>\n//                       <span>Upload</span>\n//                     </>\n//                   )}\n//                 </div>\n//               </label>\n//               <input\n//                 type=\"file\"\n//                 id=\"photo\"\n//                 accept=\"image/*\"\n//                 onChange={handleFileChange}\n//                 hidden\n//               />\n//             </div>\n//           )}\n\n//           {!isLogin && (\n//             <>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Full Name\"\n//                 value={formData.name}\n//                 onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Age\"\n//                 value={formData.age}\n//                 onChange={(e) => setFormData({ ...formData, age: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Address\"\n//                 value={formData.address}\n//                 onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Mobile\"\n//                 value={formData.mobile}\n//                 onChange={(e) => setFormData({ ...formData, mobile: e.target.value })}\n//                 required\n//               />\n//             </>\n//           )}\n\n//           <input\n//             type=\"email\"\n//             placeholder=\"Email\"\n//             value={formData.email}\n//             onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n//             required\n//           />\n//           <input\n//             type=\"password\"\n//             placeholder=\"Password\"\n//             value={formData.password}\n//             onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n//             required\n//           />\n\n//           <button type=\"submit\" className=\"auth-btn\">\n//             {isLogin ? \"Login\" : \"Sign Up\"}\n//           </button>\n//         </form>\n\n//         <div className=\"auth-footer\">\n//           {isLogin ? (\n//             <p>\n//               New User? <span onClick={() => setIsLogin(false)}>Sign Up</span>\n//             </p>\n//           ) : (\n//             <p>\n//               Already have an account? <span onClick={() => setIsLogin(true)}>Login</span>\n//             </p>\n//           )}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default AuthModal;","map":{"version":3,"names":[],"sources":["C:/Users/Admin/Desktop/Web Development/Projects/zwigato/frontend/src/parts/AuthModal.js"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\n// import \"./AuthModal.css\";\n// console.log(\"ðŸ” API Base URL =\", process.env.REACT_APP_API_URL);\n\n\n// function AuthModal({ onClose, onLogin }) {\n//   const [isLogin, setIsLogin] = useState(true);\n//   const [formData, setFormData] = useState({\n//     name: \"\",\n//     age: \"\",\n//     address: \"\",\n//     mobile: \"\",\n//     email: \"\",\n//     password: \"\",\n//     photo: null,\n//     photoPreview: null,\n//   });\n\n//   useEffect(() => {\n//     return () => {\n//       if (formData.photoPreview) {\n//         URL.revokeObjectURL(formData.photoPreview);\n//       }\n//     };\n//   }, [formData.photoPreview]);\n\n//   // const handleSubmit = async (e) => {\n//   //   e.preventDefault();\n\n//   //   const form = new FormData();\n//   //   Object.keys(formData).forEach((key) => {\n//   //     if (formData[key] && key !== \"photoPreview\") {\n//   //       form.append(key, formData[key]);\n//   //     }\n//   //   });\n\n//   //   const url = isLogin\n//   //     ? `${process.env.REACT_APP_API_URL}/users/login`\n//   //     : `${process.env.REACT_APP_API_URL}/users/signup`;\n\n//   //   try {\n//   //     const res = await fetch(url, {\n//   //       method: \"POST\",\n//   //       body: form,\n//   //     });\n\n//   //     const data = await res.json();\n\n//   //     if (data.token) {\n//   //       onLogin(data.token, data.user);\n//   //     } else {\n//   //       alert(data.message || \"Something went wrong!\");\n//   //     }\n//   //   } catch (err) {\n//   //     console.error(\"Fetch error:\", err);\n//   //     alert(\"Failed to connect to backend. Please check your server.\");\n//   //   }\n//   // };\n//   const handleSubmit = async (e) => {\n//   e.preventDefault();\n//   setError(\"\");\n\n//   const { email, password } = form;\n\n//   if (!email || !password) {\n//     setError(\"Email and password are required.\");\n//     return;\n//   }\n\n//   try {\n//     const endpoint = isLogin ? \"/users/login\" : \"/users/signup\";\n//     console.log(\"ðŸ“¡ Sending to:\", endpoint, { email, password });\n\n//     const res = await API(endpoint, {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify({ email, password }), // âœ… Must be stringified\n//     });\n\n//     console.log(\"âœ… Response:\", res);\n\n//     if (res.token) {\n//       localStorage.setItem(\"token\", res.token);\n//       onLogin(res.token);\n//       onClose();\n//     } else {\n//       setError(res.message || \"Invalid server response.\");\n//     }\n//   } catch (err) {\n//     console.error(\"âŒ Login failed:\", err);\n//     setError(err.message || \"Something went wrong.\");\n//   }\n// };\n\n//   const handleFileChange = (e) => {\n//     const file = e.target.files[0];\n//     if (file) {\n//       const previewUrl = URL.createObjectURL(file);\n//       setFormData({ ...formData, photo: file, photoPreview: previewUrl });\n//     }\n//   };\n\n//   return (\n//     <div className=\"auth-overlay\">\n//       <div className=\"auth-modal animate-popup\">\n//         <div className=\"auth-header\">\n//           <h2>{isLogin ? \"Welcome Back!\" : \"Create an Account\"}</h2>\n//           <button className=\"close-btn\" onClick={onClose}>\n//             âœ–\n//           </button>\n//         </div>\n\n//         <form className=\"auth-form\" onSubmit={handleSubmit}>\n//           {!isLogin && (\n//             <div className=\"photo-upload\">\n//               <label htmlFor=\"photo\">\n//                 <div className=\"photo-frame\">\n//                   {formData.photoPreview ? (\n//                     <img\n//                       src={formData.photoPreview}\n//                       alt=\"Preview\"\n//                       className=\"photo-preview\"\n//                     />\n//                   ) : (\n//                     <>\n//                       <span role=\"img\" aria-label=\"camera\" style={{ fontSize: \"24px\" }}>\n//                         ðŸ“·\n//                       </span>\n//                       <span>Upload</span>\n//                     </>\n//                   )}\n//                 </div>\n//               </label>\n//               <input\n//                 type=\"file\"\n//                 id=\"photo\"\n//                 accept=\"image/*\"\n//                 onChange={handleFileChange}\n//                 hidden\n//               />\n//             </div>\n//           )}\n\n//           {!isLogin && (\n//             <>\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Full Name\"\n//                 value={formData.name}\n//                 onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"number\"\n//                 placeholder=\"Age\"\n//                 value={formData.age}\n//                 onChange={(e) => setFormData({ ...formData, age: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Address\"\n//                 value={formData.address}\n//                 onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n//                 required\n//               />\n//               <input\n//                 type=\"text\"\n//                 placeholder=\"Mobile\"\n//                 value={formData.mobile}\n//                 onChange={(e) => setFormData({ ...formData, mobile: e.target.value })}\n//                 required\n//               />\n//             </>\n//           )}\n\n//           <input\n//             type=\"email\"\n//             placeholder=\"Email\"\n//             value={formData.email}\n//             onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n//             required\n//           />\n//           <input\n//             type=\"password\"\n//             placeholder=\"Password\"\n//             value={formData.password}\n//             onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n//             required\n//           />\n\n//           <button type=\"submit\" className=\"auth-btn\">\n//             {isLogin ? \"Login\" : \"Sign Up\"}\n//           </button>\n//         </form>\n\n//         <div className=\"auth-footer\">\n//           {isLogin ? (\n//             <p>\n//               New User? <span onClick={() => setIsLogin(false)}>Sign Up</span>\n//             </p>\n//           ) : (\n//             <p>\n//               Already have an account? <span onClick={() => setIsLogin(true)}>Login</span>\n//             </p>\n//           )}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default AuthModal;\n"],"mappings":"AAAA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}