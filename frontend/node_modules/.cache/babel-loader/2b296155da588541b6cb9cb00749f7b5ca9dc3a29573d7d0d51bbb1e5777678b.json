{"ast":null,"code":"// // const API = (path, opts={}) => {\n// //   const base = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n// //   const headers = opts.headers || {};\n// //   const token = localStorage.getItem('token');\n// //   if (token) headers['Authorization'] = 'Bearer ' + token;\n// //   return fetch(base + path, {...opts, headers}).then(r=>r.json());\n// // };\n// // export default API;\n// // const API = async (url, options = {}) => {\n// //   const res = await fetch(`${process.env.REACT_APP_API_URL}/items`, options);\n// //   return await res.json();\n// // };\n\n// // export default API;\n// const API_BASE = \"http://localhost:5000/api\"; // hardcoded for debug\n\n// //const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// /**\n//  * API(path, options)\n//  * - path starts with '/items' or '/cart' or '/users/...' (no /api prefix)\n//  * - options: fetch init (method, headers, body)\n//  */\n// export default async function API(path, options = {}) {\n//   const url = `${API_BASE}${path}`;\n//   const headers = {\n//     \"Content-Type\": \"application/json\",\n//     ...(options.headers || {}),\n//   };\n\n//   // keep token automatically (if present)\n//   if (!headers.Authorization) {\n//     const token = localStorage.getItem(\"token\");\n//     if (token) headers.Authorization = `Bearer ${token}`;\n//   }\n\n//   const fetchOpts = { headers, ...options };\n//   try {\n//     const res = await fetch(url, fetchOpts);\n//     // if server returns not-json (HTML error) throw with text\n//     const text = await res.text();\n//     try {\n//       const json = JSON.parse(text || \"{}\");\n//       if (!res.ok) throw new Error(json.message || `Server error ${res.status}`);\n//       return json;\n//     } catch {\n//       // not json\n//       if (!res.ok) throw new Error(text || `Server error ${res.status}`);\n//       // if ok but not json return text\n//       return text;\n//     }\n//   } catch (err) {\n//     console.error(\"API error:\", err);\n//     throw err;\n//   }\n// }","map":{"version":3,"names":[],"sources":["C:/Users/Admin/Desktop/Web Development/Projects/zwigato/frontend/src/api.js"],"sourcesContent":["// // const API = (path, opts={}) => {\n// //   const base = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n// //   const headers = opts.headers || {};\n// //   const token = localStorage.getItem('token');\n// //   if (token) headers['Authorization'] = 'Bearer ' + token;\n// //   return fetch(base + path, {...opts, headers}).then(r=>r.json());\n// // };\n// // export default API;\n// // const API = async (url, options = {}) => {\n// //   const res = await fetch(`${process.env.REACT_APP_API_URL}/items`, options);\n// //   return await res.json();\n// // };\n\n// // export default API;\n// const API_BASE = \"http://localhost:5000/api\"; // hardcoded for debug\n\n// //const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// /**\n//  * API(path, options)\n//  * - path starts with '/items' or '/cart' or '/users/...' (no /api prefix)\n//  * - options: fetch init (method, headers, body)\n//  */\n// export default async function API(path, options = {}) {\n//   const url = `${API_BASE}${path}`;\n//   const headers = {\n//     \"Content-Type\": \"application/json\",\n//     ...(options.headers || {}),\n//   };\n\n//   // keep token automatically (if present)\n//   if (!headers.Authorization) {\n//     const token = localStorage.getItem(\"token\");\n//     if (token) headers.Authorization = `Bearer ${token}`;\n//   }\n\n//   const fetchOpts = { headers, ...options };\n//   try {\n//     const res = await fetch(url, fetchOpts);\n//     // if server returns not-json (HTML error) throw with text\n//     const text = await res.text();\n//     try {\n//       const json = JSON.parse(text || \"{}\");\n//       if (!res.ok) throw new Error(json.message || `Server error ${res.status}`);\n//       return json;\n//     } catch {\n//       // not json\n//       if (!res.ok) throw new Error(text || `Server error ${res.status}`);\n//       // if ok but not json return text\n//       return text;\n//     }\n//   } catch (err) {\n//     console.error(\"API error:\", err);\n//     throw err;\n//   }\n// }\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}